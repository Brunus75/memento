----------** MEMENTO LINUX **----------

.. signifie « dossier précédent »
. signifie « dossier dans lequel je me trouve »
Tab pour l'autocomplétion ! 

I) LA COMMANDE

Mode (vraie) Console = ctrl+alt+f2 = ouvrir / ctrl+alt+f1 = sortir
pour taper des chiffres dans la console : shift+chiffres au-dessus des lettres
(ne pas utiliser le pavé numérique)
(!) login en minuscule

Un « fichier caché » sous Linux est un fichier qui commence par un point.
Ce sont en général des fichiers de configuration de programmes.

Autocomplétion de commande : taper le début de la commande puis taper 2 fois Tab (->| à gauche du clavier)
ou s'il n'y a qu'une commande associée, le mot + 1 fois Tab (ex. dat => date)

Quelques raccourcis à connaître quand une liste s'affiche page par page :
• tapez Espace pour passer à la page suivante ;
• tapez Entrée pour aller à la ligne suivante ;
• tapez q pour arrêter la liste ;

Historique des commandes avec la flèche haut du pavé numérique ou la commande history
Ctrl + R : rechercher une commande tapée avec quelques lettres

◘ Raccourcis claviers pratiques

• Ctrl + L : efface le contenu de la console (comme la commande clear)
• Ctrl + D : envoie le message EOF (fin de fichier) à la console (commande exit)
• Shift + PgUp (flèche haut barrée de 3 barres) : vous permet de « remonter » dans les messages envoyés par la console. En mode graphique, la molette de la souris accomplit aussi très bien cette action
• Shift + PgDown : pareil, mais pour redescendre

Longue commande
• Ctrl + A : ramène le curseur au début de la commande (comme touche Origin, flèche à droite du bouton Fin)
• Ctrl + E : ramène le curseur à la fin de la ligne de commandes (comme touche Fin)
• Ctrl + U : supprime tout ce qui se trouve à gauche du curseur. Si celui-ci est situé à la fin de la ligne, cette dernière sera donc supprimée.
• Ctrl + K : supprime tout ce qui se trouve à droite du curseur. S'il est situé au début de la ligne, celle-ci sera donc totalement supprimée.
• Ctrl + W : supprime le premier mot situé à gauche du curseur. Un « mot » est séparé par des espaces ; on s'en sert en général pour supprimer le paramètre situé à gauche du curseur.
• Ctrl + Y : si vous avez supprimé du texte avec une des commandes Ctrl + U, Ctrl + K ou Ctrl + W qu'on vient de voir, alors le raccourci Ctrl + Y « collera » le texte que vous venez de supprimer. C'est donc un peu comme un couper-coller.


II) La structure des dossiers et fichiers

◘ Organisation des dossiers

Au lieu de séparer chaque disque dur, lecteur CD, lecteur de disquettes, lecteur de carte mémoire… Linux place en gros tout au même endroit.
Deux types de fichiers :
• classiques (.txt)
• spéciaux (représentent qqc : ex. lecteur CD)
Sous Linux, il n'y a qu'une et une seule racine : « / ».
Architecture des dossiers :
• C:\Program Files\Winzip (Windows)
• /usr/bin/ (linux)

◘ pwd & which : où… où suis-je ?

• pwd : afficher le dossier actuel
mateo21@mateo21-desktop:~$ = /home/mateo21 (~ = home, dossier perso)
mateo21@mateo21-desktop:~$ pwd
/home/mateo21

• which : connaître l'emplacement d'une commande
chaque commande sous Linux correspond à un programme. Ainsi, pwd est un programme.
Une commande n'est rien d'autre qu'un programme qu'on peut appeler n'importe quand et n'importe où dans la console.
La commande which prend un paramètre : le nom de la commande dont vous voulez connaître l'emplacement.
mateo21@mateo21-desktop:~$ which pwd
/bin/pwd
(!) les programmes sous Linux ne possèdent en général pas d'extension (contrairement à Windows où l'extension utilisée est en général .exe)

◘ ls : lister les fichiers et dossiers

Les dossiers apparaissent en bleu foncé. En bleu clair : raccourci vers un dossier qui se trouve en fait ailleurs sur le disque.

• -a : afficher tous les fichiers et dossiers cachés
mateo21@mateo21-desktop:~$ ls -a

• -F : indique le type d'élément
mateo21@mateo21-desktop:~$ ls -F
Desktop/  Examples@  images/  log/  tutos/

• -l : liste détaillée
mateo21@mateo21-desktop:~$ ls -l
total 16
drwxr-xr-x 2 mateo21 mateo21 4096 2007-09-24 17:22 Desktop

• -h : afficher la taille en Ko, Mo, Go…

• -t : trier par date de dernière modification
En pratique, je combine -t avec -r qui renverse l'ordre d'affichage des fichiers.
Je combine un peu tous les paramètres que l'on vient de voir, ce qui donne un beau ls -larth

◘ cd: changer de dossier

la commande cd (Change Directory) ne prend pas plein de paramètres mais juste un seul : le nom du dossier dans lequel vous souhaitez aller.
Si on veut aller à la racine, il suffit de taper cd / :
mateo21@mateo21-desktop:~$ cd /
mateo21@mateo21-desktop:/$ pwd
/
Allons dans le sous-dossier usr :
mateo21@mateo21-desktop:/$ cd usr
mateo21@mateo21-desktop:/usr$ ls -F
bin/  games/  include/  lib/  local/  sbin/  share/  src/  X11R6/
mateo21@mateo21-desktop:/usr$ cd games
mateo21@mateo21-desktop:/usr/games$
Pour revenir au dossier précédent, aussi appelé dossier parent, c'est-à-dire /usr :
mateo21@mateo21-desktop:/usr/games$ cd ..
mateo21@mateo21-desktop:/usr$
Si on avait voulu reculer de deux dossiers parents, on aurait écrit../..(« reviens en arrière, puis reviens en arrière »). Cela nous aurait ramené à la racine :
mateo21@mateo21-desktop:/usr/games$ cd ../..
mateo21@mateo21-desktop:/$

Il y a en fait deux façons de changer de dossier : en indiquant un chemin relatif, ou en indiquant un chemin absolu.

• chemin relatif 
on utilise un chemin relatif, c'est-à-dire relatif au dossier actuel

• chemin absolu
Un chemin absolu commence toujours par la racine (/). Vous devez ensuite faire la liste des dossiers dans lesquels vous voulez entrer. Par exemple, supposons que je sois dans/home/mateo21et que je souhaite aller dans/usr/games. Avec un chemin absolu :
mateo21@mateo21-desktop:~$ cd /usr/games
mateo21@mateo21-desktop:/usr/games$
Si on avait voulu faire la même chose à coup de chemin relatif, il aurait fallu écrire :
mateo21@mateo21-desktop:~$ cd ../../usr/games/
mateo21@mateo21-desktop:/usr/games$
Ce qui signifie « reviens en arrière (donc dans/home) puis reviens en arrière (donc dans/), puis va en avant dans usr, puis va en avant dans games ».

• retour au répertoire home/
mateo21@mateo21-desktop:/usr/games$ cd /home/mateo21/ (brutale)
mateo21@mateo21-desktop:/usr/games$ cd ~ (maligne)
mateo21@mateo21-desktop:/usr/games$ cd (super maligne : cd sans rien)

• Autocomplétion du chemin
L'autocomplétion de chemin fonctionne de la même manière que l'autocomplétion de commande qu'on a vue dans le chapitre précédent : avec la touche Tab
mateo21@mateo21-desktop:~$ cd /usr
mateo21@mateo21-desktop:/usr$ cd ga(+ Tab)
mateo21@mateo21-desktop:/usr$ cd games/
Appuyer 2 fois sur Tab s'il y a plusieurs éléments proposés
mateo21@mateo21-desktop:/usr$ cd l
lib/   local/
mateo21@mateo21-desktop:/usr$ cd l(o + Tab)cal/

◘ du: taille occupée par les dossiers

• -h : la taille pour les humains
mateo21@mateo21-desktop:~$ du -h
400K    ./.Trash
4,0K    ./.themes

• -a : afficher la taille des dossiers ET des fichiers
mateo21@mateo21-desktop:~$ du -ah
...
8,0K    ./.jedit/settings-backup/abbrevs~5~
24K     ./.jedit/settings-backup/history~1~

• -s : avoir juste le grand total
Pour n'avoir que l'espace total occupé par le dossier et donc ne pas afficher le détail des sous-dossiers, utilisez -s
mateo21@mateo21-desktop:~$ du -sh
81M     .


III) MANIPULER DES FICHIERS

◘ cat & less : afficher un fichier

mateo21@mateo21-desktop:~$ cd /var/log

• cat : afficher tout le fichier
mateo21@mateo21-desktop:/var/log$ cat syslog
Elle est plus adaptée lorsque l'on travaille sur de petits fichiers que sur des gros, car dans un cas comme celui-là, on n'a pas le temps de lire tout ce qui s'affiche à l'écran.
On notera quand même le paramètre -n qui permet d'afficher les numéros de ligne :
mateo21@mateo21-desktop:/var/log$ cat -n syslog

• less : afficher le fichier page par page
La grosse différence entre less et cat, c'est que less affiche progressivement le contenu du fichier, page par page. Ça laisse le temps de le lire dans la console.
mateo21@mateo21-desktop:/var/log$ less syslog
Comment lire la suite ?

• Les raccourcis basiques indispensables
○ Espace : affiche la suite du fichier. fait défiler le fichier vers le bas d'un « écran » de console.
○ Entrée : affiche la ligne suivante. 
○ d : affiche les onze lignes suivantes (soit une moitié d'écran). 
○ b : retourne en arrière d'un écran. (ou touche Page Up)
○ y : retourne d'une ligne en arrière (ou flèche haut)
○ u : retourne en arrière d'une moitié d'écran (onze lignes).
○ q : arrête la lecture du fichier. Cela met fin à la commande less.

• Quelques raccourcis plus avancés
○ = : indique où vous en êtes dans le fichier (numéro des lignes affichées et pourcentage)
○ h : affiche l'aide (toutes les commandes que je vous apprends ici, je les tire de là). Tapez q pour sortir de l'aide.
○ / : tapez / suivi du texte que vous recherchez pour lancer le mode recherche. Faites Entrée pour valider.
Expressions régulières acceptées.
○ n : après avoir fait une recherche avec/, la touche n vous permet d'aller à la prochaine occurrence de votre recherche. 
○ N : pareil que n, mais pour revenir en arrière.

◘ head & tail : afficher le début et la fin d'un fichier

• head : afficher le début du fichier
La commande head affiche seulement les premières lignes du fichier. Elle ne permet pas de se déplacer dans le fichier comme less, mais juste de récupérer les premières lignes.

mateo21@mateo21-desktop:/var/log$ head syslog
Nov 14 00:44:23 mateo21-desktop syslogd 1.4.1#21ubuntu3: restart.

Paramètres : -n, suivi d'un nombre. Il permet d'afficher le nombre de lignes que vous voulez. Par exemple, si vous ne voulez que les trois premières lignes, tapez :
mateo21@mateo21-desktop:/var/log$ head -n 3 syslog
Nov 14 00:44:23 mateo21-desktop syslogd 1.4.1#21ubuntu3: restart.
Nov 14 00:44:23 mateo21-desktop anacron[6725]: Job `cron.daily' terminated
Nov 14 00:44:23 mateo21-desktop anacron[6725]: Normal exit (1 job 

• tail : afficher la fin du fichier
la commande tail vous renvoie la fin du fichier, donc les dernières lignes.
mateo21@mateo21-desktop:/var/log$ tail syslog
On peut là encore utiliser -n suivi d'un nombre pour afficher les $x$ dernières lignes :
mateo21@mateo21-desktop:/var/log$ tail -n 3 syslog
Autre paramètre : -f
Ce paramètre magique ordonne à tail de « suivre » la fin du fichier au fur et à mesure de son évolution.
Ctrl + C pour arrêter la commande tail

(!) Ctrl + C est utilisable dans la plupart des programmes console pour demander leur arrêt.

Par défaut, tail -f recherche les nouveaux changements dans le fichier toutes les secondes. Si vous voulez, vous pouvez rajouter le paramètre -s suivi d'un nombre. Par exemple,tail -f -s 3 syslog recherchera les changements toutes les trois secondes (plutôt que toutes les secondes)

◘ touch & mkdir : créer des fichiers et dossiers

• touch : créer un fichier
La commande attend un paramètre : le nom du fichier à créer.
mateo21@mateo21-desktop:/var/log$ cd
mateo21@mateo21-desktop:~$
mateo21@mateo21-desktop:~$ touch fichierbidon
mateo21@mateo21-desktop:~$ ls -F
Desktop/    Examples@     images/  log/      Musique/  tutos/
Documents/  fichierbidon  Images/  Modèles/  Public/   Vidéos/
Vous pouvez créer un fichier de l'extension que vous voulez :
mateo21@mateo21-desktop:~$ touch autrefichierbidon.txt
Vous pouvez créer plusieurs fichiers en une seule commande :
touch fichierbidon autrefichierbidon.txt
Et si je veux que mon fichier contienne un espace, je fais comment ?
touch "Fichier bidon"

• mkdir : créer un dossier
mkdir mondossier autredossier
Il y a un paramètre utile avec mkdir : -p. Il sert à créer tous les dossiers intermédiaires. 
mkdir -p animaux/vertebres/chat
… créera le dossier animaux, puis à l'intérieur le sous-dossier vertebres, puis à l'intérieur encore le sous-dossier chat !

◘ cp & mv : copier et déplacer un fichier

• cp : copier un fichier
cp fichierbidon fichiercopie
Le premier paramètre est le nom du fichier à copier, le second le nom de la copie du fichier à créer.
En faisant cela, on aura donc deux fichiers identiques dans le même répertoire : fichierbidon et fichiercopie.

○ Copier dans un autre dossier :
si je veux copier fichierbidon dans le sous-dossier mondossier que j'ai créé tout à l'heure :
cp fichierbidon mondossier/
Le fichier fichierbidon sera copié dans mondossier sous le même nom
Si vous voulez copier fichierbidon dans mondossier sous un autre nom, faites comme ceci :
cp fichierbidon mondossier/fichiercopie
cp fichierbidon /var/log/
… copierafichierbidondans le dossier/var/log.

○ Copier des dossiers :
Avec l'option-R, vous pouvez copier un dossier, ainsi que tous les sous-dossiers et fichiers qu'il
contient !
cp -R animaux autresanimaux
… cela aura pour effet de copier animaux ainsi que tous ses sous-dossiers sous le nom autresanimaux.

○ Utiliser le joker*
Le symbole * est appelé joker, ou encore wildcard en anglais sous Linux.
Il vous permet de copier par exemple tous les fichiers image .jpg dans un sous-dossier :
cp *.jpg mondossier/
Pour copier tous les fichiers dont le nom commence par « so » :
cp so* mondossier/

• mv : déplacer un fichier
2 utilités :
- déplacer un fichier (ou un dossier) ;
- renommer un fichier (ou un dossier).

○ Déplacer un fichier 
mv fichierbidon mondossier/
Vous pouvez déplacer des dossiers aussi simplement :
mv animaux/ mondossier/
Vous pouvez aussi utiliser les jokers :
mv *.jpg mondossier/

○ Renommer un fichier 
mv fichierbidon superfichier
… renommera fichierbidon en superfichier. Après cette commande, fichierbidon n'existe plus, il a été renommé.

○ Déplacer et renommer un fichier à la fois
Vous pouvez aussi déplacer fichierbidon dans mondossier tout en lui affectant un nouveau nom :
mv fichierbidon mondossier/superfichier

◘ rm : supprimer des fichiers et dossiers

(!) il n'existe pas de corbeille dans la console de Linux :
le fichier est directement supprimé sans possibilité de récupération !

• rm : supprimer un fichier
rm fichierbidon
rm fichierbidon fichiercopie

○ -i : demander confirmation
mateo21@mateo21-desktop:~$ rm -i fichierbidon
rm: détruire fichier régulier vide `fichierbidon'?
o/y ou n + Entrée

○ -f : forcer la suppression, quoi qu'il arrive (à utiliser le plus rarement possible)
rm -f fichierbidon

○ -v : dis-moi ce que tu fais, petit cachotier
Le paramètre -v (Verbose, verbeux en anglais, c'est-à-dire « parler beaucoup »)
est un paramètre que l'on retrouve dans beaucoup de commandes sous Linux.
Il permet de demander à la commande de dire ce qu'elle est en train de faire.
mateo21@mateo21-desktop:~$ rm -v fichierbidon fichiercopie
détruit `fichierbidon'
détruit `fichiercopie'

○ -r : supprimer un dossier et son contenu
rm -r animaux/
… supprime le dossier animaux ainsi que tout ce qu'il contenait (sous-dossiers vertebres et chat)
Aussi : rmdir. La grosse différence avec rm -r, c'est que rmdir ne peut supprimer un dossier que s'il est vide

○ rm et le joker de la mort (qui tue)
NON NON NON NE FAITES JAMAIS CA !!! => rm -rf /*
rm : commande la suppression ;
-r : supprime de manière récursive tous les fichiers et dossiers ;
-f : force la suppression sans demander la moindre confirmation ;
/* : supprime tous les fichiers et dossiers qui se trouvent à la racine (/) quel que soit leur nom (joker *)

◘ ln : créer des liens entre fichiers

Elle permet de créer des raccourcis. On peut créer deux types de liens :
- des liens physiques ;
- des liens symboliques.

○ Créer des liens physiques 
Plus rarement utilisé que le lien symbolique
Un lien physique permet d'avoir deux noms de fichiers qui partagent exactement le même contenu,
c'est-à-dire le même inode
Ainsi, que vous passiez par fichier1 ou par fichier2, vous modifiez exactement le même contenu.
mkdir tests
cd tests
touch fichier1
ln fichier1 fichier2
mateo21@mateo21-desktop:~/tests$ ls -l
total 0
-rw-r--r-- 2 mateo21 mateo21 0 2008-07-31 13:55 fichier1
-rw-r--r-- 2 mateo21 mateo21 0 2008-07-31 13:55 fichier2
La seconde colonne de la liste (qui indique « 2 » pour chacun des fichiers) correspond au nombre de fichiers qui
partagent le même inode.
Le seul moyen de vérifier que ces fichiers partagent le même contenu, c'est de faire ls -i pour afficher les numéros
d'inode correspondants et de vérifier que ces deux fichiers sont associés au même inode.

○ Créer des liens symboliques 
Le principe du lien symbolique est que l'on crée un lien vers un autre nom de fichier. 
Cette fois, on pointe vers le nom de fichier et non vers l'inode directement (figure suivante).
rm fichier2
Créons maintenant un nouveau fichier2, cette fois sous forme de lien symbolique.
On utilise là encore la commande ln, mais avec le paramètre -s (s comme symbolique) :
ln -s fichier1 fichier2
mateo21@mateo21-desktop:~/tests$ ls -l
total 0
-rw-r--r-- 1 mateo21 mateo21 0 2008-07-31 13:55 fichier1
lrwxrwxrwx 1 mateo21 mateo21 8 2008-07-31 14:15 fichier2 -> fichier1
-> la toute première lettre de la seconde ligne est un l (comme link, c'est-à-dire lien) ;
-> tout à la fin de la seconde ligne, une flèche montre clairement que fichier2 pointe vers fichier1.

Si vous supprimez fichier2, il ne se passe rien de mal. 
Par contre, si vous supprimez fichier1, fichier2 pointera vers un
fichier qui n'existe plus. 
Le lien symbolique sera cassé et ne servira donc plus à rien. On parle de « lien mort » ;
D'autre part, l'avantage des liens symboliques est qu'ils fonctionnent aussi sur des répertoires,
contrairement aux liens physiques.


IV) UTILISATEURS & DROITS

Linux est un système multi-utilisateurs. 
Cela signifie que plusieurs personnes peuvent travailler simultanément sur le même OS, 
en s'y connectant à distance notamment.

◘ sudo: exécuter une commande en root

Il y a un utilisateur « spécial », root, aussi appelé superutilisateur. 
Celui-ci a tous les droits sur la machine.

• sudo : devenir root un instant
Cette commande signifie « Faire en se substituant à l'utilisateur » : Substitute User DO.
sudo commande
mateo21@mateo21-desktop:/home$ sudo ls
[sudo] password for mateo21:
autredossier Desktop Examples Images Modèles Musique tutos
autresanimaux Documents images log mondossier Public Vidéos

• sudo su : devenir root et le rester
mateo21@mateo21-desktop:/home$ sudo su
[sudo] password for mateo21:
root@mateo21-desktop:/home#
Le symbole # à la fin de l'invite de commandes vous indique que vous êtes devenus superutilisateur.
Pour quitter le « mode root », tapez exit (ou faites la combinaison Ctrl + D).
root@mateo21-desktop:/home/mateo21# exit
exit
mateo21@mateo21-desktop:~$

◘ adduser : gestion des utilisateurs

• adduser : ajouter un utilisateur
Vous devez au minimum fournir un paramètre : le nom de l'utilisateur à créer.
root@mateo21-desktop:/home# adduser patrick
Ajout de l'utilisateur « patrick »...
Ajout du nouveau groupe « patrick » (1001)...
Ajout du nouvel utilisateur « patrick » (1001) avec le groupe « patrick »...
Création du répertoire personnel « /home/patrick »...
Copie des fichiers depuis « /etc/skel »...
Rajouter un sudo devant la commande si vous n'êtes pas déjà root ; pour cela, tapez sudo adduser patrick
Le répertoire personnel de patrick est automatiquement créé (/home/patrick) et son compte est préconfiguré.
On vous demande ensuite de taper son mot de passe :
Entrez le nouveau mot de passe UNIX :
Retapez le nouveau mot de passe UNIX :
passwd : le mot de passe a été mis à jour avec succès

• passwd : changer le mot de passe
S'il était nécessaire de changer le mot de passe de patrick par la suite,
utilisez la commande passwd en indiquant en paramètre le nom du compte à modifier.
root@mateo21-desktop:/home# passwd patrick
Entrez le nouveau mot de passe UNIX :
Retapez le nouveau mot de passe UNIX :
passwd : le mot de passe a été mis à jour avec succès
(!) sans compte en paramètre, vous modifiez le password du compte connecté (peut-être root)

• deluser : supprimer un compte
deluser patrick
(!) Ne jamais supprimer son compte utilisateur 
Si vous voulez supprimer aussi son home et tous ses fichiers personnels, utilisez le paramètre --remove-home :
deluser --remove-home patrick

◘ addgroup : gestion des groupes

Si vous ne définissez rien, un groupe du même nom que l'utilisateur sera automatiquement créé :
ainsi, mateo21 appartient au groupe mateo21 et patrick au groupe patrick.
root@mateo21-desktop:~# cd /home
root@mateo21-desktop:/home# ls -l
total 24
drwx------ 2 root root 16384 2007-09-19 18:22 lost+found
drwxr-xr-x 65 mateo21 mateo21 4096 2007-11-15 22:40 mateo21
drwxr-xr-x 2 patrick patrick 4096 2007-11-15 23:00 patrick
=> la 3ème colonne indique le propriétaire du fichier ou dossier ;
=> la 4ème indique le groupe qui possède ce fichier ou dossier.

• addgroup : créer un groupe
Vous avez juste besoin de spécifier le nom de celui-ci en paramètre :
root@mateo21-desktop:/home# addgroup amis
Ajout du groupe « amis » (identifiant 1002)...
Terminé.

• usermod : modifier un utilisateur
Possède plusieurs paramètres, dont :
-l : renomme l'utilisateur (le nom de son répertoire personnel ne sera pas changé par contre) ;
-g : change de groupe.
Si je veux mettre patrick dans le groupe amis, je ferai donc comme ceci :
usermod -g amis patrick
Et pour remettre patrick dans le groupe patrick comme il l'était avant :
usermod -g patrick patrick
(!) Il est aussi possible de faire en sorte qu'un utilisateur appartienne à plusieurs groupes. 
Pour ce faire, utilisez le paramètre -G (majuscule).
Exemple : usermod -G amis,paris,collegues patrick.
Séparez les noms des groupes par une virgule, sans espace entre chaque nom de groupe.
(!!) Lorsque vous avez recours à -G, l'utilisateur change de groupe et ce peu importe les groupes auxquels il
appartenait auparavant.
Si vous voulez ajouter des groupes à un utilisateur (sans perdre les groupes auxquels il appartenait avant cela),
utilisez -a :
usermod -aG amis patrick

• delgroup : supprimer un groupe
Si vous voulez supprimer un groupe, c'est tout simple :
delgroup amis

◘ chown : : gestion des propriétaires d'un fichier

Seul l'utilisateur root peut changer le propriétaire d'un fichier.
mateo21@mateo21-desktop:~$ ls -l rapport.txt (fichier à donner à Patrick)
-rw-r--r-- 1 mateo21 mateo21 0 2007-11-15 23:14 rapport.txt
(!) ls -l +fichier n'affiche que le fichier (ls -l *.jpg afficherait uniquement les images JPEG contenues dans ce
dossier)

• chown : changer le propriétaire d'un fichier
La commande chown, qui doit être utilisée en tant que root, attend deux paramètres au moins :
le nom du nouveau propriétaire ;
le nom du fichier à modifier.
chown patrick rapport.txt
On peut voir ensuite que patrick est bien le nouveau propriétaire du fichier :
root@mateo21-desktop:/home/mateo21# ls -l rapport.txt
-rw-r--r-- 1 patrick mateo21 0 2007-11-15 23:14 rapport.txt
Seulement… il appartient toujours au groupe mateo21 !

• chgrp : changer le groupe propriétaire d'un fichier
chgrp s'utilise exactement de la même manière que chown à la différence près qu'il affecte cette fois le groupe
propriétaire d'un fichier.
chgrp amis rapport.txt
root@mateo21-desktop:/home/mateo21# ls -l rapport.txt
-rw-r--r-- 1 patrick amis 0 2007-11-15 23:14 rapport.txt

• chown peut aussi changer le groupe propriétaire d'un fichier !
chown patrick:amis rapport.txt
Cela affectera le fichier à l'utilisateur patrick et au groupe amis.
Il suffit de séparer par un symbole deux points (« : ») le nom du nouvel utilisateur (à gauche)
et le nom du nouveau groupe (à droite).

• -R : affecter récursivement les sous-dossiers
L'option -R de chown modifie tous les sous-dossiers et fichiers contenus dans un dossier pour y affecter un nouvel
utilisateur (et un nouveau groupe si on utilise la technique du deux points que l'on vient de voir).
Par exemple, si je veux donner tout le contenu du dossier personnel de patrick à mateo21 (et au
groupe mateo21), c'est très simple :
chown -R mateo21:mateo21 /home/patrick/

◘ chmod : modifier les droits d'accès

• Le fonctionnement des droits 
1ère colonne :
drwxr-xr-x 2 mateo21 mateo21 4096 2007-11-13 21:53 Desktop
On peut voir cinq lettres différentes. Voici leur signification :
- d (Directory) : indique si l'élément est un dossier ;
- l (Link) : indique si l'élément est un lien (raccourci) ;
- r (Read) : indique si on peut lire l'élément ;
- w (Write) : indique si on peut modifier l'élément ;
- x (eXecute) : si c'est un fichier, « x » indique qu'on peut l'exécuter. 
Ce n'est utile que pour les fichiers exécutables (programmes et scripts).
Si c'est un dossier, « x » indique qu'on peut le « traverser », c'est-à-dire qu'on peut voir les sous-dossiers qu'il
contient si on a le droit de lecture dessus.
Si la lettre apparaît, c'est que le droit existe. S'il y a un tiret à la place, c'est qu'il n'y a aucun droit.
Le premier élément d mis à part, on constate que r, w et x sont répétés trois fois en fonction des utilisateurs :
- le premier triplet rwx indique les droits que possède le propriétaire du fichier sur ce dernier ;
- le second triplet rwx indique les droits que possèdent les autres membres du groupe sur ce fichier ;
- enfin, le dernier triplet rwx indique les droits que possèdent tous les autres utilisateurs de la machine sur le
fichier.

• chmod : modifier les droits d'accès
Vous n'avez pas besoin d'être root pour utiliser chmod. 
Vous devez juste être propriétaires du fichier dont vous voulez modifier les droits d'accès.

• Attribuer des droits avec des chiffres (chmod absolu)
on attribue un chiffre à chaque droit :
Droit Chiffre
r        4
w        2
x        1
Si vous voulez combiner ces droits, il va falloir additionner les chiffres correspondants.
Ainsi, pour attribuer le droit de lecture et de modification, il faut additionner $4+2$, ce qui donne 6.
Le chiffre 6 signifie donc « Droit de lecture et d'écriture ».
Droit  Chiffre     Calcul
---       0      0 + 0 + 0
-w-       2      0 + 2 + 0
rwx       7      4 + 2 + 1
Avec ça, on peut calculer la valeur d'un triplet de droits. Il faut faire le même calcul pour les droits que l'on veut
attribuer au propriétaire, au groupe et aux autres.
Par exemple, « 640 » indique les droits du propriétaire, du groupe et des autres (dans l'ordre).
6 : droit de lecture et d'écriture pour le propriétaire.
4 : droit de lecture pour le groupe.
0 : aucun droit pour les autres.
Le droit maximal que l'on puisse donner à tout le monde est 777 : droit de lecture, d'écriture et d'exécution pour le
propriétaire, pour son groupe et pour tous les autres.
Au contraire, avec un droit de 000, personne ne peut rien faire… à part root, bien sûr.
Pour changer les droits sur le fichier rapport.txt, et être le seul autorisé à le lire et l'éditer, je dois exécuter
cette commande :
chmod 600 rapport.txt

• Attribuer des droits avec des lettres (chmod relatif)
Dans ce mode, il faut savoir que :
u = user (propriétaire) ;
g = group (groupe) ;
o = other (autres).
… et que :
+ signifie : « Ajouter le droit » ;
- signifie : « Supprimer le droit » ;
= signifie : « Affecter le droit ».

chmod g+w rapport.txt
Signification : « Ajouter le droit d'écriture au groupe ».

chmod o-r rapport.txt
Signification : « Enlever le droit de lecture aux autres ».

chmod u+rx rapport.txt
Signification : « Ajouter les droits de lecture et d'exécution au propriétaire ».

chmod g+w,o-w rapport.txt
Signification : « Ajouter le droit d'écriture au groupe et l'enlever aux autres ».

chmod go-r rapport.txt
Signification : « Enlever le droit de lecture au groupe et aux autres ».

chmod +x rapport.txt
Signification : « Ajouter le droit d'exécution à tout le monde ».

chmod u=rwx,g=r,o=- rapport.txt
Signification : « Affecter tous les droits au propriétaire, juste la lecture au groupe, rien aux autres ».

• Et toujours… -R pour affecter récursivement
Le paramètre -R existe aussi pour chmod. Si vous affectez des droits sur un dossier avec -R, tous ses fichiers et
sous-dossiers récupèreront le même droit.
Si je veux être le seul à pouvoir lire, éditer et exécuter les fichiers de mon répertoire personnel et de tous ses
fichiers, j'ai juste besoin d'écrire :
chmod -R 700 /home/mateo21


V) Nano, l'éditeur de texte du débutant

Parmi les plus célèbres éditeurs de texte console de Linux, il faut connaître : Nano, Vim et Emacs.

◘ Premiers pas avec Nano

Pour démarrer le logiciel, il vous suffit simplement de taper nano dans la console :
nano
Le symbole ^ signifie Ctrl. Ainsi, pour quitter Nano, il suffit de taper Ctrl + X.
Ctrl + G : afficher l'aide ;
Ctrl + K : couper la ligne de texte (et la mettre dans le presse-papier) ;
Ctrl + U : coller la ligne de texte que vous venez de couper ;
Ctrl + C : afficher à quel endroit du fichier votre curseur est positionné (numéro de ligne…) ;
Ctrl + W : rechercher dans le fichier ;
Ctrl + O : enregistrer le fichier (écrire) ;
Ctrl + X : quitter Nano.
Si vous voulez sortir du mode recherche, tapez Ctrl + C (Annuler).

Si vous souhaitez aller au résultat suivant (au « deux » suivant), faites à nouveau Ctrl + W
pour lancer une recherche.
La recherche précédente est sauvegardée et apparaît entre crochets. 
Si vous voulez rechercher le même mot (et donc aller au résultat suivant),
tapez juste Entrée sans écrire de mot à rechercher (figure suivante).

Pour enregistrer à tout moment, faites Ctrl + O
Tapez juste le nom du fichier que vous voulez créer puis pressez Entrée.

• Les paramètres de la commande Nano
Le plus courant est d'indiquer en paramètre le nom du fichier qu'on veut ouvrir. Ainsi :
nano salut.txt
… ouvrira le fichier salut.txt.
○ -m : autorise l'utilisation de la souris sous Nano. 
○ -i : indentation automatique.
○ -A : active le retour intelligent au début de la ligne.
Si je veux lancer Nano avec toutes ces options à la fois, je peux donc écrire :
nano -miA salut.txt

◘ Configurer Nano avec .nanorc

Il existe un fichier de configuration de Nano qui indique toutes vos préférences. Celui-ci s'appelle .nanorc.

• Pourquoi .nanorc ?
La plupart des fichiers de configuration commencent par un point.
Cela permet de « cacher » le fichier quand on fait un ls (sauf ls -a)
il se peut que le fichier .nanorc n'existe pas chez home. 
Si tel est le cas, Nano sera chargé avec les options par défaut.

• Création du .nanorc
Pas de .nanorc ? Pas de problème, il suffit de le créer. On peut par exemple faire ceci :
nano .nanorc
Dans ce fichier, vous devez écrire une commande par ligne.
Chaque commande commence par un set (pour activer) ou un unset (pour désactiver) suivi de l'option qui vous intéresse.
Par exemple, pour activer la souris, écrivez :
set mouse
On peut faire de même pour éviter d'avoir à taper à chaque fois les paramètres-iet-Aavec d'autres séries deset. Au
final, on écrira ceci :
set mouse
set autoindent
set smarthome
Enregistrez le fichier avec Ctrl + O. Comme vous avez déjà mentionné le nom du fichier en paramètre lors de l'ouverture
de Nano, celui-ci sera automatiquement écrit pour vous. 
Vous pouvez ensuite faire Ctrl + X pour quitter Nano. Démarrer une nouvelle session Nano pour que
les changements soient pris en compte. 

• Le nanorc global et la coloration syntaxique
Il existe un fichier nanorc « global » qui est pris en compte pour tout le monde. Celui-ci est situé
dans/etc/nanorc (attention : il n'y a pas de point devant, cette fois.)
Ce fichier ne peut être modifié que par root. Je vous conseille donc de l'ouvrir avec un sudo
(ou dans une console en root si vous avez fait sudo su avant) :
sudo nano /etc/nanorc
# set autoindent
Supprimez juste le # pour décommenter la ligne
et donc pour activer l'indentation automatique pour tous les utilisateurs.
Vers la fin, vous verrez une section appelée « color setup », qui commence par ces lignes-là :
## Nanorc files
# include "/usr/share/nano/nanorc.nanorc"
## C/C++
# include "/usr/share/nano/c.nanorc"
## HTML
# include "/usr/share/nano/html.nanorc"
Décommenter toutes les lignes d'include. Cela permettra d'activer la coloration « intelligente » de vos
fichiers selon leur type. Vous pourrez ainsi avoir des fichiers HTML colorés, des fichiers C colorés, des
fichiers nanorc colorés, etc.

◘ Configurer sa console avec .bashrc

il existe un fichier de configuration de l'ensemble de la console : le.bashrc. Il se situe dans votre répertoire
personnel et celui-ci existe déjà normalement.
mateo21@mateo21-desktop:/usr/share/nano$ cd
mateo21@mateo21-desktop:~$ nano .bashrc

• Édition du .bashrc personnel
○ Personnaliser l'invite de commandes
Rendez-vous plus bas dans le fichier, jusqu'à ce que vous tombiez sur ces lignes :
# set a fancy prompt (non-color, unless we know we "want" color)
case "$TERM" in
xterm-color)
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
;;
*)
PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
;;
esac
# Comment in the above and uncomment this below for a color prompt
# PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033
Décommenter pour activer l'invite de commandes colorée + Enregistrer (ctrl + o)

○ Créer des alias 
alias = commandes que vous créez et qui sont automatiquement transformées en d'autres commandes
Descendez un peu plus bas dans le fichier, vous trouverez des lignes commentées commençant par « alias ».
Je vous invite à les personnaliser comme moi pour commencer :
# enable color support of ls and also add handy aliases
if [ "$TERM" != "dumb" ]; then
eval "`dircolors -b`"
alias ls='ls --color=auto'
#alias dir='ls --color=auto --format=vertical'
#alias vdir='ls --color=auto --format=long'
fi
# some more ls aliases
#alias ll='ls -l'
#alias la='ls -A'
#alias l='ls -CF'

alias ls='ls --color=auto'
Celui-ci active la coloration des résultats d'un ls à chaque fois que vous tapez ls.
En fait, ls est systématiquement et automatiquement transformé par la console en ls --color=auto

Compléter l'alias ll pour utiliser plus d'options à la fois :
alias ll='ls -lArth'
… signifie que la commande ll fera appel à ls avec les options qui permettent d'afficher le détail de chaque fichier,
d'afficher les fichiers cachés, d'afficher les fichiers dans l'ordre inverse de dernière modification (le fichier le
plus récent sera en bas) et d'afficher des tailles de fichiers lisibles pour un humain (-h)

La commandelsappellera automatiquement l'alias ls --color=auto, ce qui fait qu'un ll sera aussi coloré.
Bref, c'est un peu un alias en chaîne.

(!) Pour voir tous les alias : alias dans la console 

Pour créer son propre alias : alias nom='commande'
Ex. : sécuriser nos rm pour éviter que l'on puisse supprimer tout le système depuis la racine /.
Il y a en effet un paramètre de sécurité disponible avec rm:--preserve-root.
En définissant un alias surrm, vous ne pourrez pas oublier :
alias rm='rm --preserve-root'

• Édition du bashrc global
Si vous voulez définir des alias ou modifier l'invite de commandes pour tous vos utilisateurs,
vous pouvez le faire en une seule fois en éditant le fichier bashrc global situé dans : /etc/bash.bashrc
Ce bashrc doit être édité en root.
(!) Les éléments du bashrc personnel ont la priorité sur ceux du bashrc global.
Si un même alias est défini dans les deux, c'est celui du bashrc personnel qui sera pris en compte.

• Et aussi… le .profile
Il existe un ~/.profile et un /etc/profile. Quelle est la différence ?
En gros, le .profile est lu à chaque nouvelle console dans laquelle vous vous loggez.
C'est le cas des consoles que vous ouvrez avec Ctrl + Alt + F1 à F6 (tty1 à tty6).
Le .bashrc est lu lorsque vous ouvrez une console dans laquelle vous ne vous loggez pas.
C'est le cas des consoles que vous ouvrez en mode graphique (Terminal sous Unity, Konsole sous KDE)
Dans la pratique, le .profile fait par défaut appel au .bashrc… 
Donc il suffit d'éditer votre.bashrcet vous modifierez ainsi les options de toutes vos consoles :
celles avec et sans login.

(!) Le shell est le programme qui interprète les commandes que vous tapez (synonyme de « console »)


VI) Installer des programmes avec apt-get

◘ Les dépôts 

L'endroit où tous les paquets se trouvent est appelé dépôt (repository en anglais).
En France, par défaut, Ubuntu utilise le dépôt fr.archive.ubuntu.com.
Ce n'est pas toujours une bonne idée de garder le dépôt par défaut car en cas de nouvelle version d'Ubuntu
et de ses logiciels, celui-ci est surchargé et devient alors très lent.
Si vous êtes chez Wanadoo / Orange, je vous recommande d'utiliser le dépôt Oleane (appartenant à Orange).

• Gérer ses dépôts
la liste des dépôts que votre ordinateur utilise est stockée dans un fichier.
Pour éditer ce fichier, il faut utiliser un éditeur de texte comme… Nano
sudo nano /etc/apt/sources.list
chaque ligne du fichier commence par une de ces deux directives :
○ deb : pour télécharger la version compilée (binaire) des programmes. C'est ce que vous voudrez faire dans la plupart des
cas car c'est la version « prête à l'emploi » ;
○ deb-src : permet de récupérer le code source du programme. Généralement, vous n'en avez pas besoin, sauf si vous êtes
curieux et que vous voulez voir la source d'un programme. C'est l'avantage des logiciels libres de pouvoir consulter la
source des programmes !
Voici une ligne « type » :
deb http://fr.archive.ubuntu.com/ubuntu/ hardy universe
En premier paramètre, on a l'adresse du dépôt. Ici, le dépôt français par défaut est
http://fr.archive.ubuntu.com/ubuntu/.
Ensuite, on a le nom de la version de la distribution qu'on utilise, « hardy » dans ce cas.
Enfin, le dernier paramètre (et tous les paramètres suivants s'il y en a) correspond à la « section » du dépôt dans
laquelle vous voulez regarder.
la seule chose que vous devriez avoir à faire, c'est remplacer toutes les adresses (http…) par celle du nouveau dépôt
que vous voulez utiliser.

• Utiliser l'outil graphique

Ubuntu : allez dans Système → Administration → Sources de logiciels ;
2019 : Application Logiciels et mises à jour 
Télécharger depuis : Autre → choisir son dépôt (avant : cliquer sir Sélectionner le meilleur serveur)
Cliquez sur « Actualiser » pour mettre à jour la liste des logiciels disponibles

◘ Les outils de gestion des paquets

○ paquet : c'est un programme « prêt à l'emploi », l'équivalent des programmes d'installation sous Windows;
○ dépendance : un paquet peut avoir besoin de plusieurs autres paquets pour fonctionner, on dit qu'il a des
    dépendances ;
○ dépôt : c'est le serveur sur lequel on va télécharger nos paquets.

Nous devons généralement suivre trois étapes pour télécharger un paquet :
○ apt-get update (optionnel) : pour mettre notre cache à jour si ce n'est pas déjà fait ;
○ apt-cache search monpaquet (optionnel) : pour rechercher le paquet que nous voulons télécharger si nous ne connaissons
pas son nom exact ;
○ apt-get install monpaquet : pour télécharger et installer notre paquet.

◘ apt-get update : mettre à jour le cache des paquets

Il y a deux cas où vous avez besoin de le mettre à jour :
○ quand vous changez ou ajoutez un dépôt à votre liste de dépôts ;
○ quand vous n'avez pas mis à jour votre cache depuis un moment (quelques semaines).
sudo apt-get update

◘ apt-cache search : rechercher un paquet

On utilise pour cela la commande suivante :
sudo apt-cache search votrerecherche
(!) Si vous voulez une plus ample description d'un paquet, utilisez apt-cache show nomdupaquet. Exemple :
apt-cache show lbreakout2.

◘ apt-get install : installer un paquet

sudo apt-get install lbreakout2
Répondez par un « O » majuscule (comme « Oui ») et tapez Entrée pour que l'installation se poursuive.
(!) Astuce : vous pouvez installer plusieurs paquets d'un coup en les listant un à un :
apt-get install paquet1 paquet2 paquet3

◘ apt-get autoremove : supprimer un paquet

sudo apt-get remove lbreakout2
Toutefois, cela ne supprime pas les dépendances du paquet devenues inutiles.
Pour demander à apt-get de supprimer aussi les dépendances inutiles, on utilise autoremove :
apt-get autoremove lbreakout2

◘ apt-get upgrade : mettre à jour tous les paquets

sudo apt-get upgrade
(!) Pensez à faire un apt-get update pour mettre à jour le cache des paquets
sur votre machine avant de lancer un upgrade.
(!!) Il est conseillé de faire un apt-get upgrade régulièrement pour avoir le système le plus à jour possible. 
Cela vous permet de bénéficier des dernières fonctionnalités des logiciels, 
mais cela corrige aussi les failles de sécurité qui auraient pu être découvertes dans les programmes
(et on en trouve tous les jours, même dans les logiciels libres !).


VII) RTFM : lisez le manuel !

◘ man : afficher le manuel d'une commande

La commande man (manual) s'utilise très simplement : elle prend en paramètre 
le nom de la commande dont vous voulez lire la doc
man mkdir

• Se déplacer dans le manuel :
- Utilisez les touches fléchées du clavier pour vous déplacer ligne par ligne.
- les touches Page Up et Page Down (ou Espace) pour vous déplacer de page en page.
- la touche Home (aussi appelée Origine) pour revenir au début du manuel, et sur Fin pour aller à la fin.
- la touche / (slash) pour effectuer une recherche ; Tapez ensuite le mot que vous
recherchez dans le manuel puis appuyez sur Entrée. 
Pour passer au résultat suivant, tapez à nouveau / puis directement sur Entrée (sans
retaper votre recherche).
- la touche Q pour quitter le manuel à tout moment, comme vous le faisiez avec less.

• Les principales sections du manuel
- NAME : le nom de la commande + courte description 
- SYNOPSIS : c'est la liste de toutes les façons d'utiliser la commande. 
- DESCRIPTION : une description plus approfondie de ce que fait la commande + liste des paramètres et
leur signification. 
- AUTHOR : l'auteur du programme. 
- REPORTING BUGS : si vous rencontrez un bug dans le logiciel, on vous donne l'adresse de la personne à contacter pour le
rapporter.
- COPYRIGHT : le copyright, c'est-à-dire la licence d'utilisation de la commande. 
- SEE ALSO : cette section vous propose de « voir aussi » d'autres commandes en rapport avec celle que vous êtes en train
de regarder. C'est une section parfois intéressante.

◘ Comprendre le SYNOPSIS

rôle = lister toutes les façons possibles d'utiliser la commande

• Exemple de man mkdir 
SYNOPSIS
mkdir [OPTION] DIRECTORY... 
pour utiliser mkdir :
mkdir [option entre crochet] nom du repertoire à créer (plusieurs repertoires possibles : ...)
Les mots du SYNOPSIS écrits en gras sont des mots à taper tels quels. 
Les mots soulignés, eux, doivent être remplacés par le nom approprié.

• Autres exemples 
mkdir images videos musiques
… ce qui aura pour effet de créer trois dossiers : images, videos et musiques

DESCRIPTION
Create the DIRECTORY(ies), if they do not already exist.
Mandatory arguments to long options are mandatory for short options
too.
-v, --verbose
print a message for each created directory

mkdir -v images videos musiques

Résultat :
mateo21@mateo21-desktop:~/tests$ mkdir -v images videos musiques
mkdir: création du répertoire `images'
mkdir: création du répertoire `videos'
mkdir: création du répertoire `musiques'

• man cp 
SYNOPSIS (plusieurs choix)
    cp [OPTION]… [-T] SOURCE DEST
La seule chose obligatoire ici ce sont les paramètres SOURCE (le nom du fichier à copier) et DEST
(le nom de la copie à créer).
Ces fichiers peuvent être précédés d'une ou plusieurs options (remarquez les points de suspension) 
ainsi que de l'option -T
    cp [OPTION]… SOURCE… DIRECTORY
on peut copier un ou plusieurs fichiers (SOURCE…) vers un répertoire (DIRECTORY).
Tout cela peut encore une fois être précédé d'une ou plusieurs options.
    cp [OPTION]… -t DIRECTORY SOURCE…
on peut aussi écrire le répertoire (DIRECTORY) dans un premier temps,
suivi d'un ou plusieurs fichiers (SOURCE…).
Attention, il est obligatoire d'utiliser le paramètre -t qui n'est plus entre crochets.

• Exemples d'utilisation 
Si on se base sur la première ligne, on peut juste écrire :
cp photo.jpg photo_copie.jpg
… ce qui aura pour effet de créer la copie photo_copie.jpg
Pour connaître toutes les options disponibles, vous devrez lire la section DESCRIPTION. 
On retrouve notre mode -v (verbeux) qui demande à la commande de détailler ce qu'elle fait. 
On pourrait aussi ajouter -i qui demande confirmation si le fichier de destination existe déjà.
On peut donc faire :
cp -vi photo.jpg photo_copie.jpg
Essayons un peu ce que propose la seconde ligne : copier un ou plusieurs fichiers dans un dossier.
cp photo.jpg photo_copie.jpg images/

• man apt-get 
SYNOPSIS très long, avec beaucoup d'options, parmi elles : 
{[update] | [upgrade] | [dselect-upgrade] | [install paquet…] | [remove paquet…] | [source paquet…] | [build-dep
paquet…] | [check] | [clean] | [autoclean]}
Ces barres verticales signifient « OU » , 
ce qui veut dire que vous devez mettre une et une seule option issue de la liste entre accolades.
update : met à jour le cache des paquets disponibles sur votre ordinateur ;
upgrade : met à jour tous les paquets installés si une nouvelle version est disponible ;
install paquet… : installe le ou les paquets demandés.
On peut donc écrire :
apt-get install monpaquet
Ou encore :
apt-get update
Ou encore :
apt-get autoclean

• Résumé de la syntaxe du SYNOPSIS
    ○ gras : tapez le mot exactement comme indiqué ;
    ○ souligne : remplacez le mot souligné par la valeur qui convient dans votre cas ;
    ○ [-hvc] : toutes les options -h, -v et -c sont facultatives ;
    ○ a|b : vous pouvez écrire l'option « a » OU « b », mais pas les deux à la fois ;
    ○ option… : les points de suspension indiquent que l'option peut être répétée autant de fois que vous voulez.

◘ apropos : trouver une commande

Vous lui donnez en paramètre un mot clé et elle va le rechercher dans les descriptions 
de toutes les pages du manuel.
La commande apropos est donc un peu l'inverse de man : elle vous permet de retrouver une commande.
Ex. Vous recherchez une commande en rapport avec le son :
Vous pouvez taper :
apropos sound
… ce qui va rechercher toutes les commandes qui parlent de son (sound) dans leur page du manuel.
man alsamixer

◘ D'autres façons de lire le manuel

• Le paramètre -h (et --help)
Par exemple :
apt-get 
(!) Parfois, il n'y a pas de page de manuel pour une commande (man ne fonctionne pas pour cette dernière)
mais le -h ou le --help fonctionne.

• La commande whatis
La commande whatis est une sorte de man très allégé.
whatis mkdir
mkdir (1) - make directories

• Rechercher man sur le web 
vous pouvez taper la recherche : man mkdir.


VIII) Rechercher des fichiers 

◘ locate : une recherche rapide

• Utiliser locate
il suffit d'indiquer le nom du fichier que vous voulez retrouver :
mateo21@mateo21-desktop:~$ locate notes.txt
/home/mateo21/notes.txt
mateo21@mateo21-desktop:/var/log$ locate australie
/home/mateo21/photos/australie1.jpg
/home/mateo21/photos/australie2.jpg
/home/mateo21/photos/australie3.jpg

• La base de données des fichiers
la commande ne fait pas la recherche sur votre disque dur entier, 
mais seulement sur une base de données de vos fichiers
Une fois par jour, votre système mettra à jour la base de données, avec les nouveaux fichiers 
Vous pouvez forcer la commande locate à reconstruire la base de données des fichiers du disque dur. 
Cela se fait avec la commande updatedb, à exécuter en root (avec sudo) :
sudo updatedb
Cependant, locate donne parfois trop de résultats car elle recherche dans tous les répertoires du disque dur, 
elle n'est donc pas très précise.

◘ find : une recherche approfondie

• find recherche les fichiers actuellement présents
• Fonctionnement de la commande find
find « où » « quoi (obligatoire) » « que faire avec »
○ Où : c'est le nom du dossier dans lequel la commande va faire la recherche.
Par défaut, la recherche s'effectuera dans le dossier courant et ses sous-dossiers.
○ Quoi : c'est le fichier à rechercher.
○ Que faire avec : il est possible d'effectuer des actions automatiquement sur chacun des fichiers trouvés
(on parle de « post-traitement »)

• Utilisation basique de la commande find
○ Recherche à partir du nom
find -name "logo.png" (pour retrouver un fichier qui s'appelle très exactement logo.png.)
si je veux retrouver tous les fichiers qui s'appellent syslog situés dans/var/log (et ses sous-répertoires) :
find /var/log/ -name "syslog"
(!) contrairement à locate, find récupère uniquement la liste des fichiers qui s'appellent exactement comme demandé. 
Ainsi, s'il existe un fichier nommé syslog2, il ne sera pas listé dans les résultats.
Pour qu'il le soit, il faut utiliser le joker : l'étoile « * » !
(!!) Si on avait voulu avoir la liste des fichiers qui se terminent par « syslog », on aurait écrit "*syslog".
find / -name "syslog" (recherche sur tout le disque dur)
(!!!) En général, à moins d'être très patient (ou désespéré), on ne fait pas de recherche depuis la racine

○ Recherche à partir de la taille 
mateo21@mateo21-desktop:/var$ find ~ -size +10M
/home/mateo21/souvenirs.avi
/home/mateo21/backups/backup_mai.gz
/home/mateo21/backups/backup_juin.gz
(!) Rappel : le tilde « ~ » signifie « rechercher dans mon home »
Vous pouvez aussi utiliser un moins « - » à la place du « + » pour les fichiers de moins de 10 Mo.
Et sans « + », la commande cherchera des fichiers de 10 Mo exactement

○ Recherche à partir de la date de dernier accès
Avec -atime, vous pouvez indiquer le nombre de jours qui vous séparent du dernier accès à un fichier.
mateo21@mateo21-desktop:~$ find -name "*.odt" -atime 6
/home/mateo21/ecriture/resume_infos_juin.odt
J'utilise ici 6 et non 7 car la numérotation commence à 0 ! 
Ainsi, si nous sommes le mardi 29 août, j'écrirais :
Hier, le lundi 28 août, il y a 1 jour → 0 ;
Avant-hier, le 27 août, il y a 2 jours → 1.

○ Rechercher uniquement des répertoires ou des fichiers
    -type d : pour rechercher uniquement des répertoires (directories) ;
    -type f : pour rechercher uniquement des fichiers (files)
Par défaut, find cherche des répertoires ET des fichiers.
Pour obtenir uniquement les répertoires qui s'appellentsyslog(et non pas les fichiers), tapez donc :
find /var/log -name "syslog" -type d

• Utilisation avancée avec manipulation des résultats

find -name "*.jpg"
… est équivalent à :
find -name "*.jpg" -print
-print signifie « afficher les résultats trouvés ».
Si le -print n'est pas écrit, la commande comprend toute seule qu'elle doit afficher la liste des fichiers.

○ Afficher les fichiers de façon formatée
Par défaut, on liste juste les noms des fichiers trouvés.
On peut cependant avec l'option -printf, manipuler un peu ce qui est affiché.
mateo21@mateo21-desktop:~$ find . -name "*.jpg" -printf "%p - %u\n"
./photos/australie1.jpg - mateo21
./photos/australie2.jpg - mateo21
./photos/australie3.jpg - mateo21
Ici, j'affiche le nom du fichier, un tiret et le nom du propriétaire de ce fichier. 
Le \n permet d'aller à la ligne.
man find pour avoir tous les paramètres 

○ Supprimer les fichiers trouvés
Pour faire le ménage dans mon home et par exemple supprimer tous mes fichiers « jpg », je vais écrire ceci :
find -name "*.jpg" -delete
(!) pas de confirmation, tout est effacé ! 

○ Appeler une commande
Avec -exec, vous pouvez appeler une commande qui effectuera une action sur chacun des fichiers trouvés.
Je souhaite mettre un chmod à 600 pour chacun de mes fichiers « jpg », pour que je sois le seul à pouvoir
les lire :
find -name "*.jpg" -exec chmod 600 {} \;
Pour chaque fichier .jpg trouvé, on exécute la commande qui suit -exec :
    - cette commande ne doit PAS être entre guillemets ;
    - les accolades {} seront remplacées par le nom du fichier ;
    - la commande doit finir par un \; obligatoirement.
(!) Si le fait que la commande ne vous demande pas de confirmation vous ennuie, 
vous pouvez utiliser -ok à la place de -exec. 
Le principe est le même, mais on vous demandera une confirmation pour chaque fichier rencontré.
